<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Dev blog2 by ScenK</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Dev blog2</h1>
        <h2>Flask Blog. Powered by Tornado and MongoDB</h2>
        <a href="https://github.com/ScenK/Dev_Blog2" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <p>:Info: Dev_Blog Python-Release Based On Flask, Tornado and MongoDB.
:Repository: <a href="https://github.com/ScenK/Dev_Blog2">https://github.com/ScenK/Dev_Blog2</a>
:Author: Scen.K (<a href="http://tuzii.me">http://tuzii.me</a>).
:License: MIT License.</p>

<h2>
<a name="%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84" class="anchor" href="#%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="octicon octicon-link"></span></a>文件目录结构:</h2>

<p>::</p>

<pre><code>Dev_Blog2/
    .
    ├── admin                                 后端Blueprint
    │   ├── __init__.py
    │   ├── admin.py                          后端Handler
    │   ├── static                            静态文件夹
    │   │   ├── css
    │   │   ├── images
    │   │   ├── js
    │   │   └── lib
    │   ├── templates                         页面文件夹
    │   │   └── admin
    ├── fabfile
    │   ├── __init__.py                       集成发布Fabric命令
    │   ├── redirector.py                     301跳转文件生成器
    │   └── dbmover.py                        博客版本数据库迁移助手
    ├── frontend                              前端Blueprint
    │   ├── __init__.py
    │   ├── frontend.py                       前端Handler
    │   ├── templates                         页面文件夹
    │   │   └── frontend
    ├── model
    │   ├── __init__.py
    │   └── models.py                         数据模型
    ├── static                                静态文件夹
    │   ├── css
    │   ├── less
    │   ├── images
    │   ├── js
    │   ├── lib
    │   ├── favicon.ico
    │   └── robots.txt
    ├── __init__.py
    ├── README.md                             帮助文件
    ├── requirements.txt                      Python基础安装包列表
    ├── runserver.py                          用来启动web服务器
    ├── yuicompressor.jar                     YUI js,css压缩器
    ├── config.py                             网站初始化设置文件
    └── utils                                 第三方及助手文件夹
        ├── __init__.py
        ├── email_util.py                     邮件发送器
        ├── helper                            助手文件夹
        │   ├── __init__.py
        │   ├── html_helper.py                html处理助手
        │   ├── re_helper.py                  正则表达式过滤助手
        │   └── upyun_helper.py               又拍云图片上传助手
        └── upyun.py                          又拍云SDK(v1.0)
</code></pre>

<ul>
<li>
<p>版本更替说明:</p>

<p>本项目代码为dev_blog第一版制作并上线半年后重新开发而成</p>

<p>第一版代码库地址:<a href="https://github.com/ScenK/dev_blog/">https://github.com/ScenK/dev_blog/</a></p>

<p>在完成第一版本之后 在更多的对python的进一步认识的基础上 考虑到之前第一版继续开发的扩展性受到很大限制 于是开发第二个博客代码版本</p>

<ul>
<li>技术改进:

<ul>
<li>第二个版本后端上仍然采用MongoDB作为数据库 但是增加了新的MongnEngine作为Orm 提供强大的model层</li>
<li>网站从tornado搭建改为flask版本 而tornado退居后台 只进行作为非阻塞服务器使用</li>
<li>Admin后端放弃使用foundation的框架 而使用了一个全新的模版(colorful life)</li>
<li>Admin后端放弃使用Markdown的写作方式 而采用了wysiwyg编辑器</li>
<li>Admin后端放弃使用fineuploader图片上传组建 而采用uploadifive作为替代</li>
<li>第一版数据结构优化</li>
</ul>
</li>
</ul>
</li>
<li>
<p>版本迁移须知:</p>

<p>第一版本的博客代码 使用一键数据库脚本(已集成在fab命令中)</p>

<ul>
<li>
<p>使用步骤:</p>

<ul>
<li>config.py设置好目标数据库名称(避免跟原始数据库名称一致)</li>
<li>备份导出原始数据库: fab backup_database</li>
<li>导入数据库: mongorestore -d dev_blog --drop ~/mongobak/dev_blog</li>
<li>执行迁移命令: fab dbmove</li>
<li>等待脚本结束</li>
</ul>
</li>
<li>
<p>旧版url 301跳转生成新版:</p>

<ul>
<li>fab g</li>
<li>生成的redirect file放到nginx的配置目录下方</li>
</ul>
</li>
</ul>
</li>
<li>
<p>安装须知:</p>

<ul>
<li>项目Wiki地址: (待完成)</li>
<li>博客地址: <a href="http://tuzii.me/">http://tuzii.me/</a>
</li>
<li>推荐使用独立VPS
本博客线上环境: Amazon EC2 + Ubuntu12.04 + Python2.7.3 + Nginx + Tornado + MongoDB2.0.2</li>
<li>基础环境:
Linux + Tornado + Python + MongoDB</li>
<li>可选环境:
前端使用nginx做多线程反向代理</li>
<li>基础环境配好后按照requirements.txt里列出的相关软件包装好
推荐使用pip批量安装</li>
<li>启动相关进程(MongoDB, Nginx, Tornado)</li>
</ul>
</li>
<li>
<p>安装简介(Ubuntu 12.04为例):</p>

<ul>
<li>sudo apt-get install python-pip mongodb gcc openjdk-6-jre-headless lessc</li>
<li>cd ~/ dev_blog2/</li>
<li>sudo pip install -r requirements.txt</li>
<li>sudo pip install tornado</li>
<li>cd ~/dev-blog2/

<ul>
<li>拷贝 Config/config.py.sample 到 Config/config.py 并更改网站相关设置</li>
<li>执行fab build 进行初始化部属(此时会默认生成默认的后台管理员账户密码均为'admin' 请登录后自行修改)</li>
<li>执行fab test 开启服务器进程(或者在Supervisor开启python多进程)</li>
<li>每次改动的代码更新都可以使用fab update 进行服务端代码自动更新</li>
</ul>
</li>
</ul>
</li>
<li>
<p>开发须知:</p>

<ul>
<li>遵循已有代码风格和文件夹风格 欢迎提pull request</li>
<li>MIT License.</li>
</ul>
</li>
<li>
<p>已知同项目, 不同前端风格的网站征集展示:</p>

<ul>
<li>自由&amp;宁静的web前端博客: <a href="http://bo.tuzii.me">http://bo.tuzii.me</a>
</li>
<li>送果果: <a href="http://www.songguoguo.com">http://www.songguoguo.com</a>
</li>
</ul>
</li>
</ul><p><em>Do it yourself and make joy :)</em></p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/ScenK/Dev_Blog2/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/ScenK/Dev_Blog2/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/ScenK/Dev_Blog2"></a> is maintained by <a href="https://github.com/ScenK">ScenK</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>